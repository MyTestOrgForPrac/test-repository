name: ARC Autoscaling Test

on:
  workflow_dispatch:

jobs:
  scale-test:
    runs-on: [self-hosted, kind-runner]

    strategy:
      matrix:
        job_id: [1, 2, 3, 4]

    steps:
      - name: Identify runner
        run: |
          echo "Job ID      : ${{ matrix.job_id }}"
          echo "Runner name : $RUNNER_NAME"
          echo "Host        : $(hostname)"
          echo "Start time  : $(date)"

      - name: Simulate long job
        run: |
          echo "Sleeping to allow autoscaling..."
          sleep 120

      - name: Finish
        run: |
          echo "End time: $(date)"
